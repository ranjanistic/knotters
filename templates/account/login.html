{% extends 'index.html' %}
{% load static %}
{% load i18n %}
{% load l10n %}
{% load tz %}
{% load cache %}
{% load socialaccount %}
{% load account %}
{% load custom_tags %}

{% block og_url %}{{URLS.Auth.LOGIN}}{% endblock %}
{% block og_title %}{% trans "Login" %}{% endblock %}
{% block og_site_name %}{% trans "Login" %}{% endblock %}

{% block tw_url %}{{URLS.Auth.LOGIN}}{% endblock %}
{% block tw_title %}{% trans "Login" %}{% endblock %}
{% block tw_site_name %}{% trans "Login" %}{% endblock %}

{% block title %}{% trans "Login" %}{% endblock %}

{% block nav_back_show %}{% endblock %}
{% block nav_icon_hide %}{% endblock %}

{% block nav_text %}{% trans "Login" %}{% endblock %}
{% block nav_auth_links %}{% endblock %}
{% block nav_auth_login %}{% endblock %}

{% block content %}
<div class="w3-row w3-padding w3-center tertiary">
	<img src="{{ICON}}" width="50" class="darkimg" />
	<h4>{% trans "Let's solve our problems, together." %}</h4>
</div>
<br/>
<div class="w3-row w3-padding w3-center">
	<div class="w3-col w3-quarter w3-padding"></div>
	<div class="w3-col w3-half accent pallete">
		<div class="w3-row">
			<div class="w3-col w3-half">
				<br/>
				<a class="w3-row" href="{{URLS.Auth.GOOGLE}}login/?method=oauth2&{{redirect_field_name}}={{URLS.REDIRECTOR}}?n={{request.GET.next}}">
					<button class="primary w3-padding">
						<img src="{% static 'graphics/thirdparty/google.png' %}" width="25" />
						{% trans "Continue via Google" %}
					</button>
				</a>
				<br/>
				<a class="w3-row" href="{{URLS.Auth.GITHUB}}login/?method=oauth2&{{redirect_field_name}}={{URLS.REDIRECTOR}}?n={{request.GET.next}}">
					<button class="secondary w3-padding">
						<img src="{% static 'graphics/thirdparty/github-dark.png' %}" width="25" />
						{% trans "Continue via Github" %}
					</button>
				</a>
				<br/>
				<a class="w3-row" href="{{URLS.Auth.DISCORD}}login/?method=oauth2&{{redirect_field_name}}={{URLS.REDIRECTOR}}?n={{request.GET.next}}">
					<button class="tertiary w3-padding">
						<img src="{% static 'graphics/thirdparty/discord.png' %}" width="20" />
						{% trans "Continue via Discord" %}
					</button>
				</a>
				<br/>
				<h3 class="text-accent">New here?</h3>
				<a href="{% url 'account_signup' %}?{{redirect_field_name}}={{request.GET.next}}">
					<button class="primary" data-icon="person_add">
					{% trans "Create an account" %}
					</button>
				</a>
				
			</div>
			<div class="w3-col w3-half">
				<form method="POST" action="{% url 'account_login' %}?{{redirect_field_name}}={{request.GET.next}}">
					{% csrf_token %}
					<br/>
					<h3 class="text-accent">{% trans "or use your" %}<br/>{{APPNAME}} {% trans "account" %}</h3>
					<br/>
					<div class="w3-row">
					<input type="text" class="required-field" name="login" placeholder="{% trans "Email address" %}" autocomplete="email" autofocus="autofocus" maxlength="150" required id="id_login" />
					<br/><br/>
					<input type="password" class="required-field" name="password" autocomplete="current-password" placeholder="{% trans "Password" %}" required id="id_password" />
					</div>
					<br/>
					<button class="positive recaptcha-protected-form-action" type="submit" class="g-recaptcha" data-sitekey="{{RECAPTCHA_KEY}}" data-action='submit' id="sign-in-action" data-icon="login">{% trans "Sign In" %}</button>
					<button type="button" class="primary" onclick="miniWindow('{% url 'account_reset_password' %}')" data-icon="help">{% trans "Forgot?" %}</button>
					<input type="hidden" name="{{redirect_field_name}}" value="{{URLS.REDIRECTOR}}?n={{request.GET.next}}" />
				</form>
				<br/>
			</div>
		</div>
	</div>
</div>

<br/>
<center class="w3-padding">
<strong>{% blocktrans %}By continuing via an identity on our platform, you agree to our <a onclick="newTab('{{URLS.Docs.TYPE|params:'termsofservice'}}')" target="_blank">terms of service</a> and <a onclick="newTab('{{URLS.Docs.TYPE|params:'privacypolicy'}}')" target="_blank">privacy policy</a>.{% endblocktrans %}</strong>
</center>
<br/>
{% endblock %}

{% block ext_scripts %}
<script src='https://www.google.com/recaptcha/api.js?render={{RECAPTCHA_KEY}}&trustedtypes=true'></script>
{% endblock %}
