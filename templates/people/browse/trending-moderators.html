{% load i18n %}
{% load l10n %}
{% load tz %}
{% load cache %}
{% load custom_tags %}

{% if count %}
<div class="w3-row accent">
    <div class="w3-row w3-animate-right" style="padding:16px 4px">
    {% comment %} <a class="w3-right w3-padding" href="{{URLS.PEOPLE}}"><button class="primary small" data-icon="open_in_new">More</button></a> {% endcomment %}
    <h4 class="w3-left">&nbsp;&nbsp;&nbsp;&nbsp;{% trans "Trending moderators" %}</h4>
    </div>
    <div class="w3-hide-medium w3-hide-small swiper-container swiper-browser">
        <div class="swiper-wrapper swiper-wrap" xyz="fade front-2 flip-down-40% duration-10 stagger-5">
            {% for moderator in moderators %}
            <div class="swiper-slide w3-animate-zoom">
                <div class="pallete w3-center no-pad">
                    <a href="{{moderator.getLink}}">
                        <img class="primary pallete no-pad wide" src="{{ moderator.getDP }}" alt="{{ moderator.name }}" />
                    </a>
                    <div class="w3-row w3-padding">
                        <h5 style="margin-bottom:2px" class="{% if moderator.is_verified %}align{% endif %}">{{ moderator.getName }}{% if moderator.is_verified %}<i class="positive-text w3-large">verified</i>{% endif %}</h5>
                        {% for label in moderator.get_labels %}
                            <a href="{{URLS.PEOPLE}}?search=type:{{label.text}}"><strong class="w3-tiny w3-round w3-tag {{label.theme}}" style="margin-bottom:5px">{{label.name}}</strong></a>
                        {% endfor %}
                        {% if not moderator.has_labels %}
                            <strong class="w3-tiny w3-round w3-tag tertiary">{{moderator.getXP}}</strong>
                        {% endif %}<br/>
                        <span>{{ moderator.getBio|or:moderator.nickname|or:moderator.emoticon|or:moderator.githubID|or:''|truncatechars:45 }}</span><br/>
                        {% if moderator.totalAllTopics %}
                        <a href="{{URLS.PEOPLE}}?search=topic:{{moderator.getAllTopics.0}}"><button class="small {{moderator.theme}} {{moderator.text_theme}}">{{moderator.getAllTopics.0.name}}</button></a>
                        {% endif %}
                        {% if request.user.profile != moderator %}
                        {% if not request.user.is_authenticated %}
                        <a href="{{URLS.Auth.LOGIN}}?next={{moderator.get_link}}">
                        {% endif %}
                        <button data-userID="{{moderator.get_userid}}" data-admires="{% if request.user.profile in moderator.admirers.all %}1{% else %}0{% endif %}" class="small {% if request.user.is_authenticated %}browse-admire-profile-action{% endif %} {% if request.user.profile in moderator.admirers.all %}positive{% else %}primary{% endif %}" data-icon="volunteer_activism"></button>
                        {% if not request.user.is_authenticated %}
                        </a>
                        {% endif %}
                        {% endif %}
                    </div>
                    {% if not moderator.totalAllTopics %}
                    <br/>
                    {% endif %}
                </div>
            </div>
			{% endfor %} 
        </div>
    </div>
    <div class="w3-hide-large  w3-row">
        <div class="swiper-wrap_i" xyz="fade front-2 flip-down-40% duration-10 stagger-5">
            {% for moderator in moderators %}
            <div class="w3-col w3-animate-zoom">
                <div class="pallete pallete_i no-pad w3-center">
                    <a href="{{moderator.getLink}}">
                        <img class="primary pallete no-pad wide" src="{{ moderator.getDP }}" alt="{{ moderator.name }}" />
                    </a>
                    <div class="w3-row w3-padding">
                        <h5 style="margin:2px" class="{% if moderator.is_verified %}align{% endif %}">{{ moderator.getName }}{% if moderator.is_verified %}<i class="positive-text w3-large">verified</i>{% endif %}</h5>
                        {% for label in moderator.get_labels %}
                            <a href="{{URLS.PEOPLE}}?search=type:{{label.text}}"><strong class="w3-tiny w3-round w3-tag {{label.theme}}" style="margin-bottom:5px">{{label.name}}</strong></a>
                        {% endfor %}
                        {% if not moderator.has_labels %}
                            <strong class="w3-tiny w3-round w3-tag tertiary">{{moderator.getXP}}</strong>
                        {% endif %}<br/>
                        <span>{{ moderator.getBio|or:moderator.nickname|or:moderator.emoticon|or:moderator.githubID|or:''|truncatechars:45 }}</span><br/>
                        {% if moderator.totalAllTopics %}
                        <a href="{{URLS.PEOPLE}}?search=topic:{{moderator.getAllTopics.0}}"><button class="small {{moderator.theme}}">{{moderator.getAllTopics.0.name}}</button></a>
                        {% endif %}
                        {% if request.user.profile != moderator %}
                        {% if not request.user.is_authenticated %}
                        <a href="{{URLS.Auth.LOGIN}}?next={{moderator.get_link}}">
                        {% endif %}
                        <button data-userID="{{moderator.get_userid}}" data-admires="{% if request.user.profile in moderator.admirers.all %}1{% else %}0{% endif %}" class="small {% if request.user.is_authenticated %}browse-admire-profile-action{% endif %} {% if request.user.profile in moderator.admirers.all %}positive{% else %}primary{% endif %}" data-icon="volunteer_activism"></button>
                        {% if not request.user.is_authenticated %}
                        </a>
                        {% endif %}
                        {% endif %}
                    </div>
                    {% if not moderator.totalAllTopics %}
                    <br/>
                    {% endif %}
                </div>
            </div>
			{% endfor %} 
        </div>
    </div>
    <br />
</div>
{% endif %}
