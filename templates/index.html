{% load static %}
{% load i18n %}
{% load l10n %}
{% load socialaccount %}
{% load account %}
<!DOCTYPE html>
<html lang="en">
    {% block head %}
    <head>
        <link rel="preload" as="font" href="{% static 'fonts/Poppins/Latin.woff2' %}" />
        <link rel="preload" as="font" href="{% static 'fonts/Questrial/Latin.woff2' %}" />
        <link rel="preload" as="font" href="{% static 'icons/material.woff2' %}" />

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="{% block themecolor %}#ffffff{% endblock %}" id="themecolor">
        <meta name="description" content="{% block meta_description %}{{DESCRIPTION}}{% endblock %}" />
        
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="application-name" content="{{APPNAME}}" />
        <meta name="author" content="{{APPNAME}} Community">

        <meta property="og:locale" content="en-US" />
        <meta name="image" property="og:image" content="{% block og_image_url_full %}{{SITE}}{% block og_image_url %}/static/graphics/self/1024/icon-circle.png{% endblock %}{% endblock %}" />
        <meta property="og:type" content="social" />
        <meta property="og:url" content="{{SITE}}{% block og_url %}{% endblock %}" />
        <meta property="og:title" content="{% block og_title %}Home{% endblock %} &#183; {{APPNAME}}" />
        <meta property="og:description" content="{% block og_description %}{{DESCRIPTION}}{% endblock %}" />
        <meta property="og:site_name" content="{% block og_site_name %}Home{% endblock %} &#183; {{APPNAME}}" />

        <meta name="twitter:title" content="{% block tw_title %}{{APPNAME}}{% endblock %}" />
        <meta name="twitter:description" content="{% block tw_description %}{{DESCRIPTION}}{% endblock %}" />
        <meta name="twitter:image" content="{% block tw_image_url_full %}{{SITE}}{% block tw_image_url %}/static/graphics/self/2500x1000/banner-bg.png{% endblock %}{% endblock %}" />
        <meta name="twitter:site" content="@knottersdotorg" />
        <meta name="twitter:creator" content="@ranjanistic" />
        <meta name="twitter:url" content="{{SITE}}{% block tw_url %}{% endblock %}" />
        <meta name="twitter:card" content="{% block tw_card %}summary_large_image{% endblock %}" />
    
        <meta name="linkedin:card" content="{% block ld_image_url_full %}{{SITE}}{% block ld_image_url %}/static/graphics/self/2500x1000/banner-bg.png{% endblock %}{% endblock %}" />

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="{{APPNAME}}" />
        <meta name="msapplication-TileColor" content="#ffffff" />
        <meta name="msapplication-TileImage" content="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="apple-touch-icon" href="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="apple-touch-startup-image" href="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="icon" href="{% block icon %}{% static 'graphics/self/32/icon.png' %}{% endblock %}">

        <link rel="stylesheet" href="{% static 'styles/w3.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/Poppins.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/Questrial.css' %}">
        <link rel="stylesheet" href="{% static 'icons/material.css' %}">
        <link rel="stylesheet" href="{% static 'cropper/cropper.min.css'%}" />
        <link rel="stylesheet" href="{% static 'alertify/alertify.min.css' %%}" />
        <link rel="stylesheet" href="{% static 'alertify/themes/default.min.css' %}" />
        <link rel="stylesheet" href="{% static 'swiper/swiper-bundle.min.css' %}" />
        <link rel="stylesheet" href="{% static 'styles/theme.css' %}">
        <link rel="stylesheet" href="{% static 'styles/loader.css' %}">
        <link rel="stylesheet" href="{% static 'styles/scrollbar.css' %}">
        <link rel="stylesheet" href="{% static 'styles/index.css' %}">
        <link rel="stylesheet" href="{% static 'styles/overrides.css' %}">
        {% block stylesheets %}
        <link rel="manifest" href="{{MANIFESTURL}}" />
        {% endblock %}
        <title>{% block title %}Home{% endblock %} &#183; {{APPNAME}}</title>
    </head>
    {% endblock %}
    <body>
        {% block nav %}
        <nav class="w3-row {% block nav_style %}primary{% endblock %} w3-animate-top">
            {% block nav_title %}
            <a href="{% block nav_href %}{{ROOT}}{% endblock %}" class="w3-left w3-padding w3-animate-left">
                <span hidden>{{APPNAME}}</span>
                {% block nav_icon %}<img alt="{{APPNAME}}" src="{{ICON}}" width="40" height="40" />{% endblock %}
            </a>
            <span class="w3-left"><h3 class="{% block nav_text_style %}text-primary{% endblock %}">{% block nav_text %}{{APPNAME}}{% endblock %}</h3></span>
            {% endblock %}
            {% block nav_right %}
            <span class="w3-right w3-row w3-padding w3-animate-right">
                {% block nav_links %}
                    <button aria-label="Theme switch" class="secondary themeswitch"><i class="material-icons">brightness_medium</i></button>
                    {% block nav_noauth %}
                        {% block nav_noauth_competes %}<a href="/{{SUBAPPS.compete}}"><button aria-label="Competitions" title="Competitions" class="active"><i class="material-icons">psychology</i><span class="w3-hide-small">Competitions</span></button></a>{% endblock %}
                        {% block nav_noauth_projects %}<a href="/{{SUBAPPS.projects}}"><button aria-label="Projects" title="Projects" class="positive"><i class="material-icons">widgets</i><span class="w3-hide-small">Projects</span></button></a>{% endblock %}
                    {% endblock %}
                    {% block nav_auth %}
                        {% if user.is_authenticated %}
                            {% block nav_auth_links %}{% endblock %}
                            {% block nav_auth_user %}<a href="{% if user.profile %}{{user.profile.getLink}}{% else %}{{user.getLink}}{% endif %}"><button title="Logged in as {{user.getName }}" class="accent"><img src="{{user.profile.getDP}}" alt="{{user.getName}}" id="navbarprofilepic" /></button></a>{% endblock %}
                        {% else %}
                            {% block nav_auth_login %}
                            <a href="{% url 'account_login' %}?next=/"><button title="Login" class="accent"><i class="material-icons">login</i><span class="w3-hide-small">Login</span></button></a>
                            {% endblock %}
                            {% block nav_auth_signup %}
                            <a href="{% url 'account_signup' %}?next=/"><button title="Signup" class="positive"><i class="material-icons">person_add</i><span class="w3-hide-small">Join</span></button></a>
                            {% endblock %}
                        {% endif %}
                    {% endblock %}
                {% endblock %}
            </span>
            {% endblock %}
        </nav>
        {% endblock %}

        <div style="min-height: 50vh;">
            {% block content %}
            <br/>
            <div class="w3-row">
                {% if alert %}
                <div class="w3-row positive w3-center w3-padding">
                <span class="text-positive head-font">{{alert.message}} <a href="{{alert.url}}">Click here</a></span>
                </div>
                {% endif %}
                <div class="w3-row w3-center w3-padding">
                    <img alt={{APPNAME}} src="{{ICON}}" width="100" height="100"/>
                    <h1>Knotters Community</h1>
                    <h2>Solving problems together</h2>
                    <br/>
                </div>
                <div class="w3-row w3-center w3-padding tertiary">
                    <br/>
                    <h3>Active projects of this month</h3>
                    <br/>
                    {% for project in projects %}
                    <div class="w3-col w3-third w3-padding-small">
                    <a href="{{project.getLink}}">
                    <div class="pallete primary">
                        <div class="w3-row">
                            <img alt={{project.name}} src="{{project.getDP}}" width="150" />
                        </div>
                        <h2>{{project.name}}</h2>
                        <span>{{project.description}}</span>
                    </div>
                    </a>
                    </div>
                    {% empty %}
                    <div class="w3-row w3-center">
                    <h3 >We'll bring you projects as soon as they're available.</h3>
                    <h4 >There is still some work left here for us to do.</h4>
                    </div>
                    {% endfor %}
                    <div class="w3-row" hidden>
                        <br/>
                        <a href="/{{SUBAPPS.projects}}"><button class="positive"><i class="material-icons">launch</i>More interesting projects</button></a>
                    </div>
                    <br/>
                </div>

                <div class="w3-row w3-center w3-padding accent">
                    <br/>
                    <h3 class="text-accent">Top contributors of this month</h3>
                    <br/>
                    {% for person in topcontributors %}
                    <div class="w3-col w3-third w3-padding-small">
                    <a href="/projects/profile/{{project.reponame}}">
                    <div class="pallete primary">
                        <div class="w3-row">
                            <img alt={{person.getName}} src="{{person.profile.getDP}}" width="150" />
                        </div>
                        <h2>{{person.name}}</h2>
                        <span>{{person.description}}</span>
                    </div>
                    </a>
                    </div>
                    {% empty %}
                    <div class="w3-row w3-center">
                    <h3>We'll bring you contributors as soon as they're available.</h3>
                    <h4>There is still some work left here for us to do.</h4>
                    </div>
                    {% endfor %}
                    <div class="w3-row" hidden>
                        <br/>
                        <a href="/{{SUBAPPS.people}}"><button class="positive"><i class="material-icons">people</i>Browse community</button></a>
                    </div>
                    <br/>
                </div>
            </div>
            {% endblock %}
        </div>
        {% block footer %}
        <footer class="w3-row secondary w3-padding w3-animate-bottom">
            <br/><br/>
            <div class="w3-col w3-half primary-text w3-padding">
                <a href="/press" class="text-secondary" hidden>For the press</a><br/>
                <a href="/report" class="text-secondary" hidden>Report a problem</a><br/>
                <a href="/docs" class="text-secondary">Docs &amp; statements</a><br/>
            </div>
            <div class="w3-col w3-half w3-padding-small">
                <br/><br/>
                <a href="/">
                <div class="w3-row">
                    <h2 class="text-secondary w3-right">Knotters Community</h2>
                </div>
                <div class="w3-row">
                    <img alt={{APPNAME}} class="w3-right" src="{{ICON}}" width="120" height="120" />
                </div>
                </a>
            </div>
            <div class="w3-row">
            <br/>
            <center>
            {% block footer_social %}
                <a href="mailto:{{CONTACTMAIL}}"><span hidden>{{CONTACTMAIL}}</span><button aria-label="Contact us" class="primary"><i class="material-icons">mail</i></button></a>
                <a target="_blank" rel="noreferrer" href="https://github.com/Knotters"><span hidden>Github</span><button aria-label="Github"  class="primary w3-animate-zoom"><img alt="Github" class="darkimg" data-ext="png" data-name="thirdparty/github" src="{% static 'graphics/thirdparty/github-dark.png' %}" width="20" height="22"/></button></a>
                <a target="_blank" rel="noreferrer" href="https://twitter.com/knottersdotorg"><span hidden>Twitter</span><button aria-label="Twitter"  class="primary w3-animate-zoom"><img alt="Twitter" src="{% static 'graphics/thirdparty/twitter.png' %}" width="22"  height="24"/></button></a>
                <a target="_blank" rel="noreferrer" href="https://instagram.com/knottersdotorg"><span hidden>Instagram</span><button aria-label="Instagram"  class="primary w3-animate-zoom"><img alt="Instagram" class="darkimg" data-ext="png" data-name="thirdparty/instagram" src="{% static 'graphics/thirdparty/instagram.png' %}" width="18" height="20" /></button></a>
                <a target="_blank" rel="noreferrer" href="https://facebook.com/knottersdotorg"><span hidden>Facebook</span><button aria-label="Facebook"  class="primary w3-animate-zoom"><img alt="Facebook" src="{% static 'graphics/thirdparty/facebook.png' %}" width="18" height="20" /></button></a>
                <a target="_blank" rel="noreferrer" href="https://discord.gg/qZ3TdVHsma"><span hidden>Discord</span><button aria-label="Discord"  class="primary w3-animate-zoom"><img alt="Discord" src="{% static 'graphics/thirdparty/discord.png' %}" width="18" height="22" /></button></a>
                <a target="_blank" rel="noreferrer" href="https://linkedin.com/company/knottersdotorg"><span hidden>Linkedin</span><button aria-label="Linkedin" class="primary w3-animate-zoom"><img alt="Linkedin" src="{% static 'graphics/thirdparty/linkedin.png' %}" width="20" height="20" /></button></a>
            {% endblock %}
            <br/><br/>
            <a href="/docs/copyright">Copyright 2021</a>
            </div>
        </footer>
        {% endblock %}

        {% block loadview %}
        <div class="view-loader" id="viewloader">
            <div class="loader"></div>
        </div>
        <div class="linear-loader" id="subloader">
            <div class="loading-animation"></div>
        </div>
        {% endblock %} 
        <script src="{% static 'alertify/alertify.min.js' %}"></script>
        <script src="{% static 'cropper/cropper.min.js' %}"></script>
        <script src="{% static 'chartjs/chart.min.js' %}"></script>
        <script src="{% static 'swiper/swiper-bundle.min.js' %}"></script>
        <script src="{% static 'scripts/index.js' %}"></script>
        <script src="{% static 'scripts/theme.js' %}"></script>
        <script>
            const csrfmiddlewaretoken = "{{csrf_token}}", authenticated = "{{user.is_authenticated}}" == 'True';
            const ROOT = "{{ROOT}}";
            const APPNAME = "{{APPNAME}}";
            const VERSION = "{{VERSION}}";
            const SUBAPPSLIST = {{SUBAPPSLIST|safe}};
            const SERVICE_WORKER = "{{SERVICE_WORKER}}";
            const dialog = alertify;
            if("{{request.GET.e}}") {
                error("{{request.GET.e}}");
            } else if("{{request.GET.a}}") {
                message("{{request.GET.a}}");
            }
        </script>
        <script src="{% static 'scripts/autostart.js' %}"></script>
        {% block scripts %}{% endblock %}
        {% block errors %}
        <script>
        {% if form.errors %}
            {% for field in form %}
                {% for error in field.errors %}
                        error("{{ error|escape }}")
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                    error("{{ error|escape }}")
            {% endfor %}
        {% endif %}
        </script>
        {% endblock %}
        <script src="{% static 'html2canvas.min.js' %}"></script>
    </body>
</html>
