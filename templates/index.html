{% load static %}
{% load i18n %}
{% load l10n %}
{% load tz %}
{% load socialaccount %}
{% load account %}
{% load custom_tags %}
<!DOCTYPE html>
<html lang="en" class="">
    {% block head %}
    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="{% block themecolor %}#ffffff{% endblock %}" id="themecolor">
        <meta name="description" content="{% block meta_description %}{{DESCRIPTION}}{% endblock %}" />
        
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="application-name" content="{{APPNAME}}" />
        <meta name="author" content="{{APPNAME}} Community">

        <meta property="og:locale" content="en-US" />
        <meta name="image" property="og:image" content="{% block og_image_url_full %}{{SITE}}{% block og_image_url %}/static/graphics/self/1024/icon-circle.png{% endblock %}{% endblock %}" />
        <meta property="og:type" content="social" />
        <meta property="og:url" content="{{SITE}}{% block og_url %}{% endblock %}" />
        <meta property="og:title" content="{% block og_title %}Home{% endblock %} &#183; {{APPNAME}}" />
        <meta property="og:description" content="{% block og_description %}{{DESCRIPTION}}{% endblock %}" />
        <meta property="og:site_name" content="{% block og_site_name %}Home{% endblock %} &#183; {{APPNAME}}" />

        <meta name="twitter:title" content="{% block tw_title %}{{APPNAME}}{% endblock %}" />
        <meta name="twitter:description" content="{% block tw_description %}{{DESCRIPTION}}{% endblock %}" />
        <meta name="twitter:image" content="{% block tw_image_url_full %}{{SITE}}{% block tw_image_url %}/static/graphics/self/2500x1000/banner-bg.png{% endblock %}{% endblock %}" />
        <meta name="twitter:site" content="@knottersdotorg" />
        <meta name="twitter:creator" content="@ranjanistic" />
        <meta name="twitter:url" content="{{SITE}}{% block tw_url %}{% endblock %}" />
        <meta name="twitter:card" content="{% block tw_card %}summary_large_image{% endblock %}" />
    
        <meta name="linkedin:card" content="{% block ld_image_url_full %}{{SITE}}{% block ld_image_url %}/static/graphics/self/2500x1000/banner-bg.png{% endblock %}{% endblock %}" />

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="{{APPNAME}}" />
        <meta name="msapplication-TileColor" content="#ffffff" />
        <meta name="msapplication-TileImage" content="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="apple-touch-icon" href="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="apple-touch-startup-image" href="{% static 'graphics/self/1024/icon-circle.png' %}" />
        <link rel="icon" href="{% block icon %}{% static 'graphics/self/32/icon.png' %}{% endblock %}">

        <link rel="stylesheet" href="{% static 'styles/w3.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/Poppins.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/Questrial.css' %}">
        <link rel="stylesheet" href="{% static 'icons/material.css' %}">
        <link rel="stylesheet" href="{% static 'cropper/cropper.min.css'%}" />
        <link rel="stylesheet" href="{% static 'alertify/alertify.min.css' %%}" />
        <link rel="stylesheet" href="{% static 'alertify/themes/default.min.css' %}" />
        <link rel="stylesheet" href="{% static 'swiper/swiper-bundle.min.css' %}" />
        <link rel="stylesheet" href="{% static 'styles/theme.css' %}">
        <link rel="stylesheet" href="{% static 'styles/loader.css' %}">
        <link rel="stylesheet" href="{% static 'styles/scrollbar.css' %}">
        <link rel="stylesheet" href="{% static 'styles/index.css' %}">
        <link rel="stylesheet" href="{% static 'styles/overrides.css' %}">
        <link rel="stylesheet" href="{% static 'styles/browser.css' %}">
        {% block stylesheets %}
        <link rel="manifest" href="{{MANIFESTURL}}" />
        {% endblock %}
        <title>{% block title %}Home{% endblock %} &#183; {{APPNAME}}</title>
    </head>
    {% endblock %}
    <body>
        {% block nav %}
        <nav class="w3-row {% block nav_style %}primary{% endblock %} w3-animate-top">
            {% block nav_title %}
            <a href="{% block nav_href %}{{ROOT}}{% endblock %}{% if request.GET.miniwin %}?miniwin=1{% endif %}" class="w3-left w3-padding w3-animate-left previous-navigation-button">
                <span hidden>{{APPNAME}}</span>
                {% block nav_icon_hide %}
                    <img alt="{{APPNAME}}" src="{{ICON}}" {% if request.GET.miniwin %}onclick="window.close()"{% endif %} class="darkimg" data-ext="svg" data-name="self/icon" width="40" height="40" />
                {% endblock %}
                <button 
                    {% block nav_back_show %}hidden{% endblock %}
                    class="primary previous-navigation-button" data-icon="{% block nav_back_icon %}arrow_back{% endblock %}" {% if request.GET.miniwin %}onclick="window.close()"{% endif %}></button>
            </a>
            <span class="w3-left"><h3 class="{% block nav_text_style %}text-primary{% endblock %}">{% block nav_text %}{{APPNAME}}{% endblock %}</h3></span>
            {% endblock %}
            {% block nav_right %}
            <span class="w3-right w3-row w3-padding w3-animate-right">
                <button aria-label="Theme switch" class="secondary themeswitch" data-icon="brightness_medium"></button>
                {% block nav_links %}
                    {% block nav_noauth %}
                        {% block nav_noauth_competes %}<a href="{{URLS.COMPETE}}"><button aria-label="Competitions" title="Competitions" class="active" data-icon="psychology"><span class="w3-hide-small">Competitions</span></button></a>{% endblock %}
                        {% block nav_noauth_projects %}<a href="{{URLS.PROJECTS}}"><button aria-label="Projects" title="Projects" class="positive" data-icon="widgets"><span class="w3-hide-small">Projects</span></button></a>{% endblock %}
                        {% block nav_noauth_people %}<a href="{{URLS.PEOPLE}}"><button aria-label="People" title="People" class="accent" data-icon="groups"><span class="w3-hide-small">People</span></button></a>{% endblock %}
                        {% block nav_noauth_extra_links %}{% endblock %}
                    {% endblock %}
                    {% block nav_extra_links %}{% endblock %}
                    {% block nav_auth %}
                        {% if user.is_authenticated %}
                            {% block nav_auth_links %}{% endblock %}
                            {% block nav_auth_user %}<a href="{% if user.profile %}{{user.profile.getLink}}{% else %}{{user.getLink}}{% endif %}"><button title="Logged in as {{user.getName }}" class="accent"><img src="{{user.profile.getDP}}" alt="{{user.getName}}" id="navbarprofilepic" /></button></a>{% endblock %}
                        {% else %}
                            {% block nav_auth_login %}
                            <a href="{% url 'account_login' %}?next=/"><button title="Login" class="accent"><i class="material-icons">login</i><span class="w3-hide-small">Login</span></button></a>
                            {% endblock %}
                            {% block nav_auth_signup %}
                            <a href="{% url 'account_signup' %}?next=/"><button title="Signup" class="positive"><i class="material-icons">person_add</i><span class="w3-hide-small">Join</span></button></a>
                            {% endblock %}
                        {% endif %}
                        {% block nav_auth_extra_links %}{% endblock %}
                    {% endblock %}
                {% endblock %}
            </span>
            {% endblock %}
        </nav>
        {% endblock %}

        <div style="min-height: 50vh;">
            {% block content %}
            <div class="w3-row">
                {% if alert %}
                <div class="w3-row positive w3-center w3-padding">
                    <span class="head-font">{{alert.message}} <a class="text-positive" href="{{alert.url}}">Click here</a></span>
                </div>
                {% endif %}
                <div class="w3-row tertiary browser-view" data-type="new-projects" id='newbie-projects-view'>
                </div>
                <div class="w3-row accent browser-view" data-type="new-profiles" id='newbie-profiles-view'>
                </div>
            </div>
            {% endblock %}
        </div>
        {% block footer %}
        <footer class="w3-row secondary w3-padding w3-animate-bottom">
            <br/><br/>
            <div class="w3-col w3-half primary-text w3-padding">
                <a href="/press" class="text-secondary w3-animate-left" hidden>For the press</a><br/>
                <span class="text-secondary w3-animate-left pointer" onclick="reportFeedbackView()">Report &amp; Feedback</span><br/>
                <a href="{{URLS.DOCS}}" class="text-secondary w3-animate-left">Docs &amp; statements</a><br/>
                <a href="{{URLS.Docs.TYPE|params:'termsofservice'}}" class="text-secondary w3-animate-left">Terms of service</a><br/>
                <a href="{{URLS.Docs.TYPE|params:'privacypolicy'}}" class="text-secondary w3-animate-left">Privacy Policy</a><br/>
                {% if request.user.is_authenticated and request.user.profile.is_manager %}
                <a href="{{URLS.MANAGEMENT}}" class="text-secondary w3-animate-left">Management</a><br/>
                {% endif %}
                <a href="mailto:{{CONTACTMAIL}}" target="_blank" class="text-secondary w3-animate-left">Contact us</a><br/>
            </div>
            <div class="w3-col w3-half w3-padding-small w3-animate-right">
                <br/><br/>
                <a href="/">
                <div class="w3-row">
                    <h2 class="text-secondary w3-right">Knotters Community</h2>
                </div>
                <div class="w3-row">
                    <img alt={{APPNAME}} class="w3-right darkimg" src="{{ICON}}" data-ext="svg" data-name="self/icon" width="120" height="120" />
                </div>
                </a>
            </div>
            <div class="w3-row">
                <br/>
                <center>
                {% block footer_social %}
                    <a href="mailto:{{CONTACTMAIL}}" target="_blank"><span hidden>{{CONTACTMAIL}}</span><button aria-label="Contact us" class="primary"><i class="material-icons">mail</i></button></a>
                    <a href="https://github.com/Knotters" target="_blank" rel="noreferrer"><span hidden>Github</span><button aria-label="Github"  class="primary w3-animate-zoom"><img alt="Github" class="darkimg" data-ext="png" data-name="thirdparty/github" src="{% static 'graphics/thirdparty/github-dark.png' %}" width="20" height="22"/></button></a>
                    <a href="https://twitter.com/knottersdotorg" target="_blank" rel="noreferrer"><span hidden>Twitter</span><button aria-label="Twitter"  class="primary w3-animate-zoom"><img alt="Twitter" src="{% static 'graphics/thirdparty/twitter.png' %}" width="22"  height="24"/></button></a>
                    <a href="https://instagram.com/knottersdotorg" target="_blank" rel="noreferrer"><span hidden>Instagram</span><button aria-label="Instagram"  class="primary w3-animate-zoom"><img alt="Instagram" class="darkimg" data-ext="png" data-name="thirdparty/instagram" src="{% static 'graphics/thirdparty/instagram.png' %}" width="18" height="20" /></button></a>
                    <a href="https://facebook.com/knottersdotorg" target="_blank" rel="noreferrer"><span hidden>Facebook</span><button aria-label="Facebook"  class="primary w3-animate-zoom"><img alt="Facebook" src="{% static 'graphics/thirdparty/facebook.png' %}" width="18" height="20" /></button></a>
                    <a href="https://discord.gg/qZ3TdVHsma" target="_blank" rel="noreferrer"><span hidden>Discord</span><button aria-label="Discord"  class="primary w3-animate-zoom"><img alt="Discord" src="{% static 'graphics/thirdparty/discord.png' %}" width="18" height="22" /></button></a>
                    <a href="https://linkedin.com/company/knottersdotorg" target="_blank" rel="noreferrer"><span hidden>Linkedin</span><button aria-label="Linkedin" class="primary w3-animate-zoom"><img alt="Linkedin" src="{% static 'graphics/thirdparty/linkedin.png' %}" width="20" height="20" /></button></a>
                {% endblock %}
                <br/><br/>
                <a href="{{URLS.Docs.TYPE|params:'copyright'}}" class="text-secondary">Copyright 2021</a>
                </center>
            </div>
        </footer>
        {% endblock %}

        {% block loadview %}
        <div class="view-loader" id="viewloader">
            <div class="loader"></div>
        </div>
        <div class="linear-loader" id="subloader">
            <div class="loading-animation"></div>
        </div>
        {% endblock %} 
        <script src="{% static 'alertify/alertify.min.js' %}"></script>
        <script src="{% static 'cropper/cropper.min.js' %}"></script>
        <script src="{% static 'chartjs/chart.min.js' %}"></script>
        <script src="{% static 'swiper/swiper-bundle.min.js' %}"></script>
        <script src="{% static 'scripts/index.js' %}"></script>
        <script src="{% static 'scripts/theme.js' %}"></script>
        <script>
            const csrfmiddlewaretoken = "{{csrf_token}}", authenticated = "{{user.is_authenticated}}" == 'True';
            const ROOT = "{{ROOT}}";
            const APPNAME = "{{APPNAME}}";
            const VERSION = "{{VERSION}}";
            const SUBAPPSLIST = {{SUBAPPSLIST|safe}};
            const SUBAPPNAME = "{{SUBAPPNAME}}";
            const dialog = alertify;
            const ICON = "{{ICON}}"
            if("{{request.GET.e}}") {
                error("{{request.GET.e}}");
            } else if("{{request.GET.a}}") {
                message("{{request.GET.a}}");
            }
            if("{{request.GET.report}}"==="1"){
                reportFeedbackView()   
            }
            const URLS = Object.freeze({{URLS|safe}})
        </script>
        <script src="{% static 'scripts/sw.js' %}"></script>
        <script src="{% static 'scripts/autostart.js' %}"></script>
        {% block scripts %}{% endblock %}
        {% block errors %}
        <script>
        {% if form.errors %}
            {% for field in form %}
                {% for error in field.errors %}
                        error("{{ error|escape }}")
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                    error("{{ error|escape }}")
            {% endfor %}
        {% endif %}
        </script>
        {% endblock %}
        <script async src="{% static 'html2canvas.min.js' %}"></script>
    </body>
</html>
